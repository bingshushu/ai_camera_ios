# RTSP连接问题调试指南

## 问题现象
iOS应用显示状态为"Stopped"，无法播放RTSP视频流。

## 已完成的修复

### 1. 修复用户名密码配置 ✅
- **问题**: iOS版本用户名密码设置为空，而Android使用"admin/admin"
- **修复**: 更新iOS VLCRTSPPlayer.swift中的认证信息

### 2. 优化VLC配置选项 ✅
- 添加了完整的RTSP配置选项
- 强制使用TCP传输（更可靠）
- 设置合适的缓冲和超时参数
- 禁用音频专注于视频流

### 3. 增强调试日志 ✅
- 添加详细的连接状态日志
- VLC状态变化的emoji标识
- 连接过程的步骤跟踪

### 4. 改进错误处理 ✅
- 更好的URL验证
- 网络连接诊断工具
- 用户友好的错误信息

### 5. UI增强 ✅
- 更详细的状态显示
- 网络诊断按钮
- 改进的重试机制

## 调试步骤

### 检查网络连接
```bash
# 在终端测试网络连通性
ping 192.168.1.88

# 测试RTSP端口（通常是554）
telnet 192.168.1.88 554
```

### 验证RTSP URL
```
rtsp://admin:admin@192.168.1.88/11
```

### 常见问题排查

1. **IP地址**: 确认192.168.1.88是正确的相机IP
2. **网络**: iPhone和相机在同一WiFi网络
3. **认证**: 用户名密码是否正确（admin/admin）
4. **端口**: RTSP端口是否开放（默认554）
5. **相机设置**: 相机是否启用了RTSP服务

### 测试不同的RTSP URL
应用现在支持以下测试流：
- 你的相机: `rtsp://192.168.1.88/11`
- 公共测试流: `rtsp://wowzaec2demo.streamlock.net/vod/mp4:BigBuckBunny_115k.mp4`
- ONVIF测试流: `rtsp://demo:demo@ipvmdemo.dyndns.org:5541/onvif-media/media.amp`

## 最新代码特性

1. **详细日志**: 控制台显示完整的连接过程
2. **网络诊断**: 自动检测主机可达性
3. **状态跟踪**: 实时显示VLC播放器状态
4. **错误恢复**: 智能重试机制
5. **调试界面**: 用户友好的诊断工具

## 下一步

运行更新后的iOS应用，查看Xcode控制台的详细日志：
- 🔗 连接尝试
- 🎬 VLC状态变化  
- 📊 网络诊断结果
- ✅ 成功连接或 ❌ 错误信息

根据日志信息可以精确定位连接问题的原因。